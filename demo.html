<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<title>DEMO - "filteredOptions" knockout binding</title>

		<script type="text/javascript" src="http://code.jquery.com/jquery-1.10.0.min.js"></script>
		<!--<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.2.1.min.js"></script>-->
		<script type="text/javascript" src="knockout-2.2.1.min.js"></script>
		<script type="text/javascript" src="ko-filteredOptions.debug.js"></script>
	
		<style type='text/css'>
			body {
				font-family: Arial;
				font-size: 14px;
			}
			.guest, .attendee, .show {				
				padding: 10px;
				margin-bottom: 10px;
				height: 40px;
				width: 400px;
			}
			.show {width: 250px}
			.left {
				width: 49%;
				float: left;
			}
			.right {
				width: 49%;
				float: right;
			}
			.example2 {width: 700px}
			.example2 .left, .example2 .right {
				border: 1px solid gray;
			}
			select {width: 180px}
			span {line-height: 22px}
		</style>
	</head>
	<body>
		<!-- ko foreach: { data: Guests(), as: 'guest' } -->
		<div class="guest">
			<div class="left">
				<b>Guest: </b><span data-bind="text: guest.Name"></span><br>
				<b>Is vegan? </b><input type="checkbox" data-bind="checked: guest.IsVegan"></input>
			</div>
			<div class="right">
				<span><b>Meal of choice:</b></span><br>
				<select data-bind="filteredOptions: $root.Meals, optionsFiltering: { propertyName: 'IsAptForVegans', propertyValue: !guest.IsVegan() }, 
					optionsValue: 'Id', optionsText: 'Name', optionsCaption: 'Choose a meal', value: guest.SelectedMeal"></select>
			</div>
		</div>
		<!-- /ko -->
		
		<hr>

		<div class="example2">
			<div class="left">
				<!-- ko foreach: { data: Attendees(), as: 'attendee' } -->
				<div class="attendee">
					<b>Attendee: </b><span data-bind="text: attendee.Name"></span><br>
					<b>Selected show: </b>
					<select data-bind="filteredOptions: $root.Shows, optionsFiltering: { propertyName: 'IsAvailable', propertyValue: false, exceptionValue: attendee.SelectedShow.originalValue },
						optionsValue: 'Id', optionsText: 'Name', optionsCaption: 'Choose a show', value: attendee.SelectedShow"></select>
				</div>
				<!-- /ko -->
			</div>
			<div class="right">
				<!-- ko foreach: { data: Shows(), as: 'show' } -->
				<div class="show">
					<b>Show: </b><span data-bind="text: show.Name"></span><br>
					<b>Is available? </b><input type="checkbox" data-bind="checked: show.IsAvailable"></input>
				</div>
				<!-- /ko -->
			</div>
		</div>		
		
		
		<script type="text/javascript" src="demo.js"></script>
	</body>
</html>
